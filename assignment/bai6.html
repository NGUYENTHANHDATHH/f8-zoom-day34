<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .card {
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 16px;
            max-width: 300px;
            background: #fafafa;
        }

        .card h2 {
            margin: 0 0 10px;
        }

        .btn {
            margin-top: 10px;
            padding: 6px 12px;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn:hover {
            background: #0056b3;
        }

        select {
            padding: 6px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        function WeatherApp() {
            const [weatherData, setWeatherData] = React.useState({
                hanoi: { city: "H√† N·ªôi", temp: 28, weather: "N·∫Øng", humidity: 65 },
                hcm: { city: "TP.HCM", temp: 32, weather: "C√≥ m√¢y", humidity: 78 },
                danang: { city: "ƒê√† N·∫µng", temp: 30, weather: "M∆∞a nh·∫π", humidity: 82 }
            });

            const [selectedCity, setSelectedCity] = React.useState("hanoi");

            // Ch·ªçn icon ph√π h·ª£p theo t√¨nh tr·∫°ng th·ªùi ti·∫øt
            const getWeatherIcon = (status) => {
                if (status.includes("N·∫Øng")) return "‚òÄÔ∏è";
                if (status.includes("M√¢y")) return "üå§Ô∏è";
                if (status.includes("M∆∞a")) return "üåßÔ∏è";
                return "üå°Ô∏è";
            };

            const cityWeather = weatherData[selectedCity];

            const refreshData = () => {
                setWeatherData(prev => {
                    const updated = { ...prev };
                    const randomize = (value) => value + Math.floor(Math.random() * 11) - 5; // ¬±5
                    updated[selectedCity] = {
                        ...updated[selectedCity],
                        temp: randomize(updated[selectedCity].temp),
                        humidity: Math.max(0, Math.min(100, randomize(updated[selectedCity].humidity))) // gi·ªØ trong 0‚Äì100
                    };
                    return updated;
                });
            };

            return (
                <div>
                    <h1>Th√¥ng tin th·ªùi ti·∫øt</h1>

                    <label>
                        Ch·ªçn th√†nh ph·ªë:
                        <select value={selectedCity} onChange={(e) => setSelectedCity(e.target.value)}>
                            <option value="hanoi">H√† N·ªôi</option>
                            <option value="hcm">TP.HCM</option>
                            <option value="danang">ƒê√† N·∫µng</option>
                        </select>
                    </label>

                    <div className="card">
                        <h2>{cityWeather.city} {getWeatherIcon(cityWeather.weather)}</h2>
                        <p><b>Nhi·ªát ƒë·ªô:</b> {cityWeather.temp}¬∞C</p>
                        <p><b>T√¨nh tr·∫°ng:</b> {cityWeather.weather}</p>
                        <p><b>ƒê·ªô ·∫©m:</b> {cityWeather.humidity}%</p>
                        <button className="btn" onClick={refreshData}>L√†m m·ªõi</button>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<WeatherApp />);
    </script>
</body>

</html>